{% extends 'setup/add-service.html' %}
{% load staticfiles %}


{% block progress_bar_width %}
    style="width: 730px;"
{% endblock %}




{% block back_nxt_div %}
    <div class="right">
        
            <div class="bt prv">
              <a href="{% if origin %}{% url 'service_provider:add_service' %}?page=2&chain={{chain_id}}&origin={{origin}}&destination={{destination}}{% else %}{% url 'service_provider:offer_services' %}{% endif %}"><i class="fa fa-long-arrow-left" aria-hidden="true" style="margin-right:15px;"></i> Back</a>
            </div>

            <!--<div class="bt nxt">-->
            <!--    <a href="?page=2"style="color: #27ae60; text-decoration: none;">Next<i class="fa fa-long-arrow-right" aria-hidden="true" style="margin-left:15px;"></i></a>-->
            <!--</div>-->
    

    
    </div>
    {% endblock %}


{% block inner_page_content %}

<style>
    
    div .pagect{
        overflow:scroll;
    }

</style>

<!-- Page Inner Content/Changes -->
{% if service_name == "warehouse" %}
    <div class="page-content active">
        <!-- Header -->
        <div class="header">
            <div class="left">
                <h1>Warehouse Locations</h1>
                <!--% include 'setup_snippet/route_inner.html' %}-->
                <p> This is where you can view/add all your warehouse locations in the countries configured earlier</p>
            </div>
            <!-- Right Status -->
            <!-- <div class="right">
                <h2 style="float:left;">Issues to fix:</h2>
                <span class="label">4</span>
                <span class="label yellow">1</span>
            </div> -->
            <!-- Right Status -->
        </div>
        <!-- Header -->
        <!-- Page Content -->
        <div class="pagect">
          <div style="float: left;">
            <a href="#" id='add_rate' class="" data-toggle="modal" data-target="#loc" route_id="{{ service_chain.pk }}">
              <i class="fa fa-plus fa-lg" aria-hidden="true">Add Address</i>
            </a>

          </div>
            <div class="steps" style="padding-top: 0px!important; style="overflow-y: scroll;"">
            <table width="100%" border="0" class="" >
                <tr>
                    <th>S/N</th>
                    <th>Address</th>
                    <th>Edit Address</th>
                </tr>
            {% for address in service.get_all_warehouses %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{address.full_address }}</td>
                    <td><a href="#" class='edit_addy' loc_id={{address.pk}}><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a></td>
                </tr>
            {% endfor %}
            </table>
              <!-- <p><h3>Setup process completed. Thank you.</h3></p> -->
                  <!-- <div class="row-fluid">
                    <h4>Route: {{ service_chain.origin }} <i class="fa fa-long-arrow-right" aria-hidden="true"></i> {{ route.destination }}</h4>
                  </div> -->

                  <!-- style="position: relative; top: -80px;"  -->

                  <!--% include 'setup_snippet/rates_table.html' with route=service_chain adjust='True' %}-->
                <!-- <div class="progress">
                </div> -->
                <!-- <div class="smcircle">
                    <i class="fa fa-users" aria-hidden="true"></i>
                    <span>Your Customers <br/>(Origin)</span>
                </div> -->

            </div>
            <div class="overlay"></div>

            <!-- Right Side Widget -->
            <div class="widget">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>


            </div>
            <!-- Right Side Widget -->
        </div>
        <!-- Page Content -->

    </div>
    <!-- Page Inner Content/Changes -->


{% elif service_name == "shipper" %}


<!-- Page Inner Content/Changes -->
    <div class="page-content active">
        <!-- Header -->
        <div class="header">
            <div class="left">
                <h1>Shipping Routes</h1>
                
            </div>
            
        </div>
        
        <div class="pagect">
          <div style="float: left;">
            <a href="#" id='add_route' class="" data-toggle="modal" data-target="#route" route_id="{{ service_chain.pk }}">
              <i class="fa fa-plus fa-lg" aria-hidden="true">Add Shipping Route</i>
            </a>

          </div>
            <div class="steps" style="padding-top: 0px!important;">
            <table width="100%" border="0" class="">
                <tr>
                    <th>S/N</th>
                    <th>Shipping Route</th>
                    <th>Edit Route</th>
                </tr>
            {% for route in service.get_all_locations %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ route }}</td>
                    <td><a href="#" class='edit_addy' loc_id={{route.pk}}><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a></td>
                </tr>
            {% endfor %}
            </table>
              

            </div>
            <div class="overlay"></div>

            <!-- Right Side Widget -->
            <div class="widget">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>


            </div>
            <!-- Right Side Widget -->
        </div>
        <!-- Page Content -->

    </div>
    <!-- Page Inner Content/Changes -->


{% else %}


<!-- Page Inner Content/Changes -->
    <div class="page-content active">
        <!-- Header -->
        <div class="header">
            <div class="left">
                <h1>Custom Clearing Locations</h1>
                <!--% include 'setup_snippet/route_inner.html' %}-->
            </div>
            
        </div>
        
        <div class="pagect">
          <div style="float: left;">
            <a href="#" id='add_clearing' class="" data-toggle="modal" data-target="#clearing" route_id="{{ service_chain.pk }}">
              <i class="fa fa-plus fa-lg" aria-hidden="true">Add Cost of Clearing</i>
            </a>

          </div>
            <div class="steps" style="padding-top: 0px!important;">
            <table width="100%" border="0" class="">
                <tr>
                    <th>S/N</th>
                    <th>Country & Price</th>
                    <th>Edit</th>
                </tr>
            {% for agent in service.get_all_locations %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ agent }}</td>
                    <td><a href="#" class='edit_addy' loc_id={{agent.pk}}><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a></td>
                </tr>
            {% endfor %}
            </table>
               
              </div>
            <div class="overlay"></div>

            <!-- Right Side Widget -->
            <div class="widget">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>


            </div>
            <!-- Right Side Widget -->
        </div>
        <!-- Page Content -->

    </div>
    <!-- Page Inner Content/Changes -->
    {% endif %}
{% endblock %}



{% block modal %}
{% include 'setup_snippet/offer_service_modal.html' %}

{% endblock %}

{% block script %}
 <!--<script src="% static 'soko-admin/js/rates_processing.js' %}"></script>-->
 <script>
    $('body').on('click', '.edit_addy', function(){
       var obj_id = $(this).attr('loc_id');
       var chain_id = $('#chain_id').val();
       var service_name = $('#service_name').val();
       $.ajax({
           url: "{% url 'service_provider:service_location' service_name chain_id %}",
           type: 'GET',
           data: {'obj_id': obj_id},
           success: function(data){
            if (service_name == "shipper"){
               $('#route').replaceWith(data);
               $('#route').modal('show');
            }
            else if(service_name == "clearing_agent"){
               $('#clearing').replaceWith(data);
               $('#clearing').modal('show'); 
            }
            else{
                $('#loc').replaceWith(data);
               $('#loc').modal('show');
           }
          },
          error: function(data){
            console.log('not working');
          }
       });
    });
 </script>
{% endblock %}
