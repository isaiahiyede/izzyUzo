{% extends "adminBase/base_index.html" %}
{% load staticfiles %}

{% block custom-styles %}
    <style type="text/css">
        .widget_scroll_inner{padding-top: 10px; padding-left: 20px; padding-right: 20px;}
        .widget_scroll_inner h4{font-size: 16px !important; color: #000;}
        .checkbox {position: inherit !important;}
        .checkbox label{text-transform: none !important;}
        .checkbox h4{font-size: 15.5px !important;}
        .long_input{width: 30% !important;}
        .small_input{width: 10% !important; min-width: 20px !important; }
        .small_input_1{width: 50% !important; min-width: 50px !important; }
        .small_left{margin-left: 40px;}
        .to_span{position: relative; left: -75px; top: 11px;}
        .question{bottom: 10px; position: relative;}
        .help_info{padding-left: 20px; top: 11px; position: relative;}
        .error{color: red; text-transform: none !important;}
        .other_checkboxes label{color: #bbb2b2;}
        span.reviews{margin-left: 10px; margin-right: 10px;}
        span.ratings{padding-right: 90px}
        .other_checkboxes label a{color: inherit}

        table th,td{
            border: 1px solid black;
            padding: 8px 10px;
            font-size: 15;
            text-align: center;
        }
        table tr{
            text-align: center;
        }
    </style>

    <link href="{% static 'sokohali/css/bootstrap-select.css' %}" rel="stylesheet">
    
{% endblock %}

{% block title  %} Setup {% endblock %}

{% block navbar %} {% endblock %}

    {% block searchbar %}
        <div class="searchbar">
            <div class="container">
                <div class="col-md-12">
                    <input type="text" placeholder="" />
                    <i class="fa fa-search t" aria-hidden="true"></i>
                    <span class="bar"></span>
                </div>

                <!-- <div class="search_filter">
                    <p class="htitle">Filter by:</p>
                    <select id="type">
                        <option value="hide">Type</option>
                        <option value="2010">Package</option>
                        <option value="2011">Order</option>
                        <option value="2012">Shipment</option>
                        <option value="2013">User</option>
                    </select>

                    <div ng-controller="AppCtrl" class="datepickerdemoBasicUsage" ng-app="MyApp">
                        <p class="rd1">From:</p>
                        <div class="rd">
                            <md-content>
                                <md-datepicker ng-model="myDate" md-placeholder="Fecha"></md-datepicker>
                            </md-content>
                        </div>
                    </div>

                    <div ng-controller="AppCtrl" class="datepickerdemoBasicUsage" ng-app="MyApp">
                        <p class="rd1">To:</p>
                        <div class="rd">
                            <md-content>
                                <md-datepicker ng-model="myDate" md-placeholder="Fecha1"></md-datepicker>
                            </md-content>
                        </div>
                    </div>

                    <div class="lastselect">
                        <select id="year">
                            <option value="hide">Additional Selector</option>
                            <option value="2010">Option 1</option>
                            <option value="2011">Option 2</option>
                            <option value="2012">Option 3</option>
                        </select>
                    </div>
                </div> -->

            </div>
        </div>
    {% endblock %}

    {% block sticky_warning %}
        <div class="sticky_msg">
            <div class="container">
                <div class="col-md-12">
                    <!-- Alert Warning -->
                    <div class="alert" role="alert">
                        <!-- <i class="fa fa-exclamation-circle" aria-hidden="true"></i> -->
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        {% for msg in messages %}
                          <blockquote style="padding-left: 15px;" class="text-{{ msg.tags }} bg-{{ msg.tags }}">{{ msg }}</blockquote>
                        {% endfor %}
                        <!-- <strong>Warning!</strong> Better check yourself, you're not looking too good.
                        <a href="#" class="fix">Fix Issue<i class="fa fa-long-arrow-right" aria-hidden="true"></i></a> -->
                    </div>
                    <!-- Alert Warning -->

                </div>
            </div>
        </div>
    {% endblock %}

    {% block inner_content %}
        <div class="inner">
            <!-- Scrollable Content -->
            <div class="scrollable">

                <div class="container">
                    <div class="row-fluid" style="min-height:100%;">

                        <!-- Services Row class "hid" when hidden -->
                        <!--<div class="page sv hid">
                            <div class="col-md-4">
                                <div class="service blue">
                                    <div class="img">
                                        <img src="{% static 'soko-admin/img/ibk1.png' %}" class="im" />
                                        <div class="circle">
                                            <img src="{% static 'soko-admin/img/icon1l.png' %}" />
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <h1>Shopping Services</h1>
                                        <p>Shop for your customers. They pay locally, you buy and deliver - <strong>from $50/month</strong></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="service green">
                                    <div class="img">
                                        <div class="circle">
                                            <img src="{% static 'soko-admin/img/icon2l.png' %}" />
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <h1>Shipping Services</h1>
                                        <p>Your customers drop off, deliver from shop or location. You ship - <strong>from $50/month</strong></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="service">
                                    <div class="img">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <h1>Market Place</h1>
                                        <p>Add inventory of popular items. Your customers click to buy. You deliver - <strong>from $25/month</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>-->
                        <!-- Services Row -->
                        <div class="col-md-12 page_outer active">
                            <div class="page two">

                                <!-- Breadcrumbs/Progress -->
                                <div class="breadcrumbs">
                                    <div class="prev">
                                        <div class="circle"></div>
                                    </div>
                                    {% block left_div %}
                                    <div class="left">
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" {% block progress_bar_width %}style="width: 25%;" {% endblock %}>
                                                <span></span>
                                            </div>
                                        </div>
                                    </div>
                                    {% endblock %}


                                    {% block back_nxt_div %}
                                    <div class="right">
                                      {% if not country %}
                                            <div class="bt prv {% if page == 1 %}hide{% endif %}">
                                              <a href="?page={{page|add:'-1'}}{% if origin and page > 2 %}&chain={{chain_id}}&origin={{origin}}&destination={{destination}}{% endif %}" style="color: #000; text-decoration: none;"><i class="fa fa-long-arrow-left" aria-hidden="true" style="margin-right:15px;"></i> Back</a>
                                            </div>

                                            <div class="bt nxt {% if page == 1 %}hide{% endif %}">
                                                <a href="{% if page > 1 and page < 5 %}
                                                            ?page={{page|add:'1'}}{% if origin %}&chain={{chain_id}}&origin={{origin}}&destination={{destination}}{% endif %}
                                                        {% else %} {% if page == 5 %} {% url 'service_provider:add_service' %}?page=1{% endif %}
                                                        {% endif %}" {% if page == 1 %}id="go_nxt"{% endif %}style="color: #27ae60; text-decoration: none;">{% if page == 5 %}Finish{% else %}Next{% endif %}<i class="fa fa-long-arrow-right" aria-hidden="true" style="margin-left:15px;"></i></a>
                                            </div>
                                        {% else %}
                                            <div class="bt prv">
                                              <a href="{% url 'service_provider:configure_setup' %}"><i class="fa fa-long-arrow-left" aria-hidden="true" style="margin-right:15px;"></i> Back</a>
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% endblock %}
                                </div>
                                <!-- Breadcrumbs/Progress -->

                                {% block inner_page_content %}
                                {% endblock %}



                                <!-- Page Inner Content/Changes -->
                                <div class="page-content" id="pglast">
                                    <p>Last Page</p>
                                </div>
                                <!-- Page Inner Content/Changes -->
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Scrollable Content -->
            </div>
        </div>

        <div class="loading">

        </div>
    {% endblock %}

{% block modal %}

{% endblock %}

{% block modal_script %}
    <script>
        $('#ProcessModal').modal('hide');
    </script>
{% endblock %}

{% block custom_select %}
{% endblock %}

{% block script %}

        <script>
            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            })
        </script>

        <script>
            $("#offer_warehouse_facility").validate();
            $("#offer_clearing_service").validate();
            $("#offer_shipping_service_form").validate();
        </script>

        <!-- Calendar Angular JS Script -->
        <!-- <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-animate.min.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-route.min.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-aria.min.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-messages.min.js'></script>
        <script src="{% static 'soko-admin/js/angular-material.js' %}"></script>
        <script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-114/assets-cache.js'></script> -->

        <script type="text/javascript">
            // Popup window code
            function newPopup(url) {
                    popupWindow = window.open(
                            url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
            }
        </script>

        <script>


            /* Add Delivery route */
            $(".btn.green.add_edit_route").on('click', function(e){
                e.preventDefault();

                var origin      = $('#id_origin').val();
                var destination = $('#id_destination').val();
                console.log(origin)
                console.log(destination)
                if (origin != '' && destination != ''){
                  if (origin === destination){
                    alert("Origin and Destination country cannot be the same.");
                    return false;
                  }
                }

               //var action = $(this).parent().find('input').val();

               //$('.loading').addClass('show');
               $form = $(this).closest('form');
                if ($form.valid()) {
                    $form.submit();
                }

               //$(this).parent().parent().find('form').submit();

               //$.ajax({
               //     url: '',
               //     type: 'POST',
               //     data: $(this).parent().parent().serialize(),
               //     success: function(data){
               //         if (action.indexOf('edit') != -1) {
               //             $(".rwidget ul li.active").replaceWith(data)
               //         }else{
               //             $(".rwidget ul").append(data)
               //         }
               //         $('.loading').removeClass('show');
               //     }
               //})
            });

            $("#go_nxt").on("click", function(e){
                //e.preventDefault();
                $selected_route = $('.trig.selected');
                //alert($selected_route.attr('href'))
                if ($selected_route.length > 0) {

                    $('.loading').addClass('show');
                    var chain = $selected_route.attr('data-chain');
                    var origin = $selected_route.attr('data-origin');
                    var destination = $selected_route.attr('data-destination');
                    //var direction = $selected_route.attr('data-direction');
                    var route_id = $selected_route.attr('route_id');

                    location.href="?page=2&chain="+chain+"&origin="+origin+"&destination="+destination;//+"&direction="+direction;

                }
            });

            $(".widget .footer .btn ").click(function (e) {
                e.preventDefault();
                //to prevent similar handler in script.js
                $('.widget').addClass('open');
                $('.pagect .overlay').addClass('open');

                $form = $(this).closest('form');
                if ($form.valid()) {
                    $('.loading').addClass('show');

                    var form_id = $form.attr('id');
                    var action = form_id.split('_')[0]; //get form action i.e offer or rent
                    $form.append('<input type="hidden" name="form_id" value="'+form_id+'"/>');
                    $form.append('<input type="hidden" name="action" value="'+action+'"/>');
                    $form.submit()
                }

            });

            /* Delivery route edit */
            //$('.rwidget .btn, .route').on('click', function () {
            //    var origin = $(this).attr('data-origin');
            //    var destination = $(this).attr('data-destination');
            //    var direction = $(this).attr('data-direction');
            //
            //    $('#route1 #origin_div').find('.select-options li[rel="'+ origin +'"]').trigger('click');
            //    $('#route1 #destination_div').find('.select-options li[rel="'+ destination +'"]').trigger('click')
            //    $('#route1 #direction_div').find('.select-options li[rel="'+ direction +'"]').trigger('click')
            //
            //    $(this).parent().parent().parent().parent().parent().find('.form').removeClass('active');
            //    var target = $(this).attr('rel');
            //    $(".form#" + target).addClass('active');
            //    $(".form#" + target).find("input[name='route_id']").val($(this).attr('route_id'))
            //
            //    //clear li active
            //    $(".rwidget ul li").removeClass('active');
            //    $(this).parent().addClass('active');
            //});

            //Deactivate the default handlers in script.js///

            <!--chain_setup_page_1-->
            $('.rwidget ul.routes li').off('click');

            $('.rwidget ul.routes li').on('click', function () {
                $('.rwidget ul.routes li').addClass('trig');
                $('.rwidget ul.routes li').removeClass('selected')
                $(this).parent().parent().toggleClass('active');
                $(this).toggleClass('selected');
                //$(this).parent().parent().parent().parent().find('.right .bt.nxt').toggleClass('hide');

                var origin            = $(this).attr('data-origin');
                var destination       = $(this).attr('data-destination');
                var route_id          = $(this).attr('route_id');
                var air_delivery_time = $(this).attr('air_delivery_time');
                var air               = $.parseJSON($(this).attr('air'));
                var sea_delivery_time = $(this).attr('sea_delivery_time');
                var sea               = $.parseJSON($(this).attr('sea'));
                //console.log(air)
                //console.log(sea)
                //$('#route1 #id_origin').val(origin);
                $('#route1 .origin').val(origin);
                //$('#route1 #id_destination').val(destination);
                $('#route1 .destination').val(destination);
                $('#route1 #id_route_id').val(route_id);
                $('#route1 #id_air').prop('checked', air);
                $('#route1 #id_air_delivery_time').val(air_delivery_time);
                $('#route1 #id_sea').prop('checked', sea);
                $('#route1 #id_sea_delivery_time').val(sea_delivery_time);
                //$('#route1 #destination_div').find('.select-options li[rel="'+ destination +'"]').trigger('click')

                // $('#route1 #origin_div').find('.select-options li[rel="'+ origin +'"]').trigger('click');
                // $('#route1 #destination_div').find('.select-options li[rel="'+ destination +'"]').trigger('click')
                //$('#route1 #direction_div').find('.select-options li[rel="'+ direction +'"]').trigger('click')


                $(this).parent().parent().parent().find('.form').removeClass('active');
                var target = $(this).attr('rel');
                $(".form#" + target).addClass('active');
                $(this).parent().parent().parent().parent().find('.right .bt.nxt').removeClass('hide');

            });



            /* Offer Service */
            //$(".btn.green.save_info").on("click", function(){
            //    $.ajax({
            //        url: '',
            //        type: 'POST',
            //        data: $(this).parent().parent().find('form').serialize(),
            //        success: function(data){
            //            console.log(dat)
            //        }
            //    })
            //});



            $('.chkbx').on('click', function(){
                if ($(this).attr('chkbx_type')) {
                    $all_chkbxs = $(this).parent().parent().parent().parent().find('input[type="checkbox"]');
                }else{
                    $all_chkbxs = $(this).parent().parent().find('input[type="checkbox"]');
                    $(this).parent().parent().parent().parent().find('input[type="checkbox"]').prop('checked', false);
                }
                $all_chkbxs.prop('checked', false);
                $(this).prop('checked', true);
            });

            $('.deactivate_service').on('click', function(){

                if (confirm("Are you sure you want to proceed?")){
                    $this = $(this);
                //if ($this.prop('disabled')) {
                    if ($this.parent().find('.deactivated_obj').length){
                        $this.parent().find('.deactivated_obj').remove()
                    }
                    $this.parent().append('<input type="hidden" name="'+$this.attr('data-direction')+'_deactivate" class="deactivated_obj" value="'+$this.attr('obj-id')+'">');

                    //$this.parent().append('<input type="hidden" name="deactivated_obj" class="deactivated_obj" value="'+$this.attr('obj-id')+'">');

                    $all_chkbxs = $(this).parent().parent().parent().parent().find('input[type="checkbox"]');
                    $all_chkbxs.prop({'checked': false, 'disabled': false});
                    //$all_chkbxs..prop('disabled', false);
                    //$('.other_checkboxes').find('input[type="checkbox"]').prop('disabled', false);
                    $('.other_checkboxes label').css('color', '#333');
                //}
                }


            })

            //deactivate other_checkboxes div by default
            $('.other_checkboxes').find('input[type="checkbox"]').prop('disabled', true)
        </script>

        <script>
            //Deactivate the default handlers in script.js///

            /* Steps Services Bullets */
            //$(".steps .item .circle").off("click");
            /* Script toggle steps */
            $(".bt.nxt").off("click");
            /* Script toggle steps */
            $(".bt.prv").off("click");
        </script>


        <script src="{% static 'soko-admin/js/index.js' %}"></script>
{% endblock %}
